<main class="full-screen max-w-3xl flex-col justify-center items-center">
  <form
    [formGroup]="form"
    (ngSubmit)="onSubmit()"
    class="w-full flex flex-col gap-4 items-center bg-white/95 backdrop-blur-sm border border-green-100 rounded-2xl shadow-lg p-8"
  >
    <h1 class="text-3xl font-semibold text-green-700">Cadastro de ONG</h1>
    <p class="text-gray-600 text-center">Preencha os dados da sua organização</p>

    @if (errorMessage()) {
    <div class="w-full p-3 bg-red-100 border border-red-300 rounded-lg text-red-700 text-sm">
      {{ errorMessage() }}
    </div>
    } @if (successMessage()) {
    <div class="w-full p-3 bg-green-100 border border-green-300 rounded-lg text-green-700 text-sm">
      {{ successMessage() }}
    </div>
    }

    <div class="form-grid">
      <div class="label-div">
        <label for="cnpj">CNPJ <span class="text-red-500">*</span></label>
        <input 
          type="text" 
          id="cnpj" 
          formControlName="cnpj" 
          placeholder="Apenas números (14 dígitos)"
          [class.border-red-500]="getFieldError('cnpj')"
          maxlength="14"
        />
        @if (getFieldError('cnpj')) {
          <span class="text-red-500 text-xs mt-1">{{ getFieldError('cnpj') }}</span>
        }
      </div>

      <div class="label-div">
        <label for="company_name">Razão Social <span class="text-red-500">*</span></label>
        <input
          type="text"
          id="company_name"
          formControlName="company_name"
          placeholder="Nome oficial da organização"
          [class.border-red-500]="getFieldError('company_name')"
        />
        @if (getFieldError('company_name')) {
          <span class="text-red-500 text-xs mt-1">{{ getFieldError('company_name') }}</span>
        }
      </div>

      <div class="label-div">
        <label for="name">Nome Fantasia <span class="text-red-500">*</span></label>
        <input
          type="text"
          id="name"
          formControlName="name"
          placeholder="Nome pelo qual é conhecida"
          [class.border-red-500]="getFieldError('name')"
        />
        @if (getFieldError('name')) {
          <span class="text-red-500 text-xs mt-1">{{ getFieldError('name') }}</span>
        }
      </div>

      <div class="label-div">
        <label for="email">E-mail <span class="text-red-500">*</span></label>
        <input 
          type="email" 
          id="email" 
          formControlName="email" 
          placeholder="contato@ong.org.br"
          [class.border-red-500]="getFieldError('email')"
        />
        @if (getFieldError('email')) {
          <span class="text-red-500 text-xs mt-1">{{ getFieldError('email') }}</span>
        }
      </div>

      <div class="label-div">
        <label for="cause">Causa Social <span class="text-red-500">*</span></label>
        <textarea
          id="cause"
          formControlName="cause"
          placeholder="Descreva a causa social da ONG (mínimo 10 caracteres)"
          [class.border-red-500]="getFieldError('cause')"
        ></textarea>
        @if (getFieldError('cause')) {
          <span class="text-red-500 text-xs mt-1">{{ getFieldError('cause') }}</span>
        }
      </div>

      <div class="label-div">
        <label for="telefone">Telefone <span class="text-red-500">*</span></label>
        <input 
          type="tel" 
          id="telefone" 
          formControlName="phone" 
          placeholder="Apenas números (ex: 11999998888)"
          [class.border-red-500]="getFieldError('phone')"
          maxlength="20"
        />
        @if (getFieldError('phone')) {
          <span class="text-red-500 text-xs mt-1">{{ getFieldError('phone') }}</span>
        }
      </div>

      <div class="label-div">
        <label for="cep">CEP <span class="text-red-500">*</span></label>
        <input 
          type="text" 
          id="cep" 
          formControlName="cep" 
          placeholder="Apenas números (8 dígitos)"
          [class.border-red-500]="getFieldError('cep')"
          maxlength="8"
        />
        @if (getFieldError('cep')) {
          <span class="text-red-500 text-xs mt-1">{{ getFieldError('cep') }}</span>
        }
      </div>

      <div class="label-div">
        <label for="number">Número <span class="text-red-500">*</span></label>
        <input 
          type="text" 
          id="number" 
          formControlName="number" 
          placeholder="Número do endereço"
          [class.border-red-500]="getFieldError('number')"
        />
        @if (getFieldError('number')) {
          <span class="text-red-500 text-xs mt-1">{{ getFieldError('number') }}</span>
        }
      </div>

      <div class="label-div">
        <label for="password">Senha <span class="text-red-500">*</span></label>
        <input
          type="password"
          id="password"
          formControlName="password"
          placeholder="Mínimo 6 caracteres"
          [class.border-red-500]="getFieldError('password')"
        />
        @if (getFieldError('password')) {
          <span class="text-red-500 text-xs mt-1">{{ getFieldError('password') }}</span>
        }
      </div>

      <div class="label-div">
        <label for="confirmPassword">Confirmar Senha <span class="text-red-500">*</span></label>
        <input
          type="password"
          id="confirmPassword"
          formControlName="confirmPassword"
          placeholder="Repita a senha"
          [class.border-red-500]="getFieldError('confirmPassword')"
        />
        @if (getFieldError('confirmPassword')) {
          <span class="text-red-500 text-xs mt-1">{{ getFieldError('confirmPassword') }}</span>
        }
      </div>
    </div>

    <div class="w-full mt-2">
      <button
        type="submit"
        [disabled]="loading()"
        class="w-full inline-flex items-center justify-center gap-2 rounded-lg bg-linear-to-r from-green-600 to-green-500 px-4 py-3 text-base font-medium text-white shadow-sm hover:from-green-700 hover:to-green-600 focus:outline-none focus:ring-4 focus:ring-green-200 transition disabled:opacity-50 disabled:cursor-not-allowed"
      >
        @if (loading()) { Cadastrando... } @else { Cadastrar ONG }
      </button>
    </div>

    <div class="text-center">
      <a routerLink="/signup" class="text-base text-green-600 hover:underline">
        Voltar para escolha de cadastro
      </a>
    </div>
  </form>
</main>
