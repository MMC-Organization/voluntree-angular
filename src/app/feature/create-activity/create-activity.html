
<div class="flex flex-col items-center justify-center min-h-screen p-4">
  
  <form
    [formGroup]="form"
    (ngSubmit)="onSubmit()"
    class="w-full max-w-lg flex flex-col gap-4 items-center bg-white/95 backdrop-blur-sm border border-green-100 rounded-2xl shadow-lg p-8"
  >
    <h1 class="text-3xl font-semibold text-green-700 mb-4">Nova Atividade</h1>

    <div class="w-full flex flex-col gap-1">
      <label class="font-semibold text-gray-700">Título</label>
      <input
        #tituloInput
        type="text"
        formControlName="title"
        (keydown.enter)="descInput.focus()"
        placeholder="Ex: Doação de Roupas"
        class="w-full rounded-lg border border-gray-200 px-4 py-2 focus:ring-2 focus:ring-green-300 outline-none"
      />
      @if (submitted() && form.get('title')?.invalid) {
        <span class="text-red-500 text-sm">Título é obrigatório.</span>
      }
    </div>

    
    <div class="w-full flex flex-col gap-1">
      <label class="font-semibold text-gray-700">Descrição</label>
      <textarea
        #descInput
        formControlName="description"
        rows="3"
        placeholder="Detalhes da vaga..."
        class="w-full rounded-lg border border-gray-200 px-4 py-2 focus:ring-2 focus:ring-green-300 outline-none"
      ></textarea>
      @if (submitted() && form.get('description')?.invalid) {
        <span class="text-red-500 text-sm">Descrição é obrigatória.</span>
      }
    </div>

    <div class="w-full flex flex-col gap-1">
      <label class="font-semibold text-gray-700">Data e Hora</label>
      <input
        type="datetime-local"
        formControlName="date"
        class="w-full rounded-lg border border-gray-200 px-4 py-2 focus:ring-2 focus:ring-green-300 outline-none"
      />
      @if (submitted() && form.get('date')?.invalid) {
        <span class="text-red-500 text-sm">Data é obrigatória.</span>
      }
    </div>

    <div class="w-full flex flex-col gap-1">
      <label class="font-semibold text-gray-700">CEP</label>
      <input
        type="text"
        formControlName="cep"
        (blur)="buscarCep()"
        placeholder="00000000"
        maxlength="8"
        class="w-full rounded-lg border border-gray-200 px-4 py-2 focus:ring-2 focus:ring-green-300 outline-none"
      />
      @if (submitted() && form.get('cep')?.invalid) {
        <span class="text-red-500 text-sm">CEP inválido (8 números).</span>
      }
    </div>

    <div class="flex gap-4 w-full">
      <div class="w-2/3">
        <label class="font-semibold text-gray-700">Cidade</label>
        <input 
            type="text" 
            formControlName="city" 
            readonly 
            class="w-full bg-gray-100 rounded-lg border border-gray-200 px-4 py-2 text-gray-500" 
        />
      </div>
      <div class="w-1/3">
        <label class="font-semibold text-gray-700">UF</label>
        <input 
            type="text" 
            formControlName="state" 
            readonly 
            class="w-full bg-gray-100 rounded-lg border border-gray-200 px-4 py-2 text-gray-500" 
        />
      </div>
    </div>

    <div class="w-full mt-4">
      <button
        type="submit"
        [disabled]="isLoading()"
        class="w-full rounded-lg bg-green-600 px-4 py-3 text-white font-medium hover:bg-green-700 transition cursor-pointer disabled:opacity-50"
      >
        {{ isLoading() ? 'Salvando...' : 'Criar Atividade' }}
      </button>
    </div>

    <div class="text-center mt-2">
      <a routerLink="/busca" class="text-green-600 hover:underline cursor-pointer">Voltar para busca</a>
    </div>

  </form>
</div>